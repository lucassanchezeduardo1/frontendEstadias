<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Categorías de Investigación</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="admin-container">

    <h2 class="section-title">
      {{ isEditing ? 'Editar Categoría' : 'Agregar Nueva Categoría' }}
    </h2>
    <div class="form-card">
      <ion-item lines="none">
        <ion-icon name="pricetag" slot="start"></ion-icon>
        <ion-input type="text" placeholder="Nombre de la categoría (ej: Biología)"
          [(ngModel)]="newCategory.nombre"></ion-input>
      </ion-item>
      <ion-item lines="none">
        <ion-icon name="document-text" slot="start"></ion-icon>
        <ion-textarea placeholder="Descripción detallada del área..." [(ngModel)]="newCategory.descripcion"
          rows="3"></ion-textarea>
      </ion-item>

      <ion-button expand="block" fill="solid" class="submit-btn" (click)="saveCategory()">
        {{ isEditing ? 'Actualizar Categoría' : 'Registrar Categoría' }}
      </ion-button>

      <ion-button *ngIf="isEditing" expand="block" fill="clear" color="medium" (click)="cancelEdit()">
        Cancelar Edición
      </ion-button>
    </div>

    <h2 class="section-title">Listado de Áreas</h2>

    <!-- Mensaje cuando no hay datos -->
    <div *ngIf="categories.length === 0" class="empty-state">
      <ion-icon name="list-outline"></ion-icon>
      <p>No hay categorías registradas todavía.</p>
    </div>

    <div class="active-item" *ngFor="let cat of categories">
      <div class="mini-avatar" style="background: #fdf2f8; color: #802030;">
        {{ cat.nombre.substring(0,2).toUpperCase() }}
      </div>
      <div class="info">
        <h4>{{ cat.nombre }}</h4>
        <p>{{ cat.descripcion }}</p>
      </div>
      <div class="action-buttons">
        <ion-button fill="clear" color="primary" (click)="editCategory(cat)">
          <ion-icon name="create-outline" slot="icon-only"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="danger" (click)="deleteCategory(cat.id)">
          <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </div>

  </div>
</ion-content>